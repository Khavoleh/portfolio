commit_msg=$(cat "$1")

if echo "$commit_msg" | grep -qE '^(major|minor|feat): '; then
  echo "ğŸ“ Validating commit message format..."

  node .husky/update-version.js "$1"

  if [ $? -ne 0 ]; then
    echo "âŒ Error: Failed to update version in package.json"
    exit 1
  fi

  echo "âœ… Version updated successfully"
fi

