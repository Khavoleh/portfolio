---
import { PAGE_URLS } from '@shared/constants.ts';
import type { NavLink } from '@shared/interfaces.ts';
import { getLanguageUrl, useTranslations } from '@shared/helpers.ts';
import LogoIcon from '@assets/logo.svg';
import { NAVIGATION_LINKS } from './constants.ts';
import { NAVBAR_TRANSLATIONS } from './translations.ts';
import BurgerIcon from './icons/burger.svg';
import ThemeSelector from './ThemeSelector.astro';
import LanguageSelector from './LanguageSelector.astro';

const t = useTranslations(Astro.url, NAVBAR_TRANSLATIONS);
const currentPath: string = Astro.url.pathname;
---

<header class="border-default fixed start-0 top-0 z-100 w-full border-b bg-slate-50 dark:bg-slate-900">
  <nav class="mx-auto flex max-w-screen-xl flex-wrap items-center justify-between p-4">
    <a
      href={PAGE_URLS.HOME}
      aria-label="Navigate to home page"
      class="transition-default focus-default flex items-center rounded-lg rtl:space-x-reverse"
    >
      <LogoIcon class="h-8" />
      <span class="text-primary ml-3 hidden self-center text-2xl font-semibold whitespace-nowrap md:block">
        {t('name')}
      </span>
    </a>

    <div class="flex items-center gap-4">
      <div class="flex items-center gap-3 md:hidden">
        <LanguageSelector idSuffix="mobile" classesSize={10} />
        <ThemeSelector idSuffix="mobile" classesSize={10} />
      </div>

      <button
        data-collapse-toggle="navbar-default"
        type="button"
        class="transition-default hover-default focus-default inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-lg p-2 md:hidden"
        aria-controls="navbar-default"
        aria-expanded="false"
        aria-label={t('menu')}
      >
        <BurgerIcon class="h-5 w-5" />
      </button>
    </div>

    <div class="hidden w-full md:block md:w-auto" id="navbar-default">
      <ul
        class="border-default mt-4 flex flex-col rounded-lg border bg-slate-50 p-4 font-medium md:mt-0 md:flex-row md:space-x-8 md:border-0 md:bg-transparent md:p-0 rtl:space-x-reverse dark:bg-slate-800 md:dark:bg-transparent"
      >
        {
          NAVIGATION_LINKS.map((link: NavLink) => {
            const isActive: boolean = currentPath === link.href;

            return (
              <li>
                <a
                  href={getLanguageUrl(Astro.url, link.href)}
                  class={
                    isActive
                      ? 'transition-default focus-default block rounded bg-blue-600 px-3 py-2 text-slate-50 md:bg-transparent md:p-0 md:text-blue-600 md:dark:text-blue-300'
                      : 'transition-default focus-default text-primary text-hover block rounded px-3 py-2 md:border-0 md:p-0 md:hover:bg-transparent'
                  }
                  aria-label={`${t('navigate.to')} ${t(link.label)} ${t('page')}`}
                  aria-current={isActive ? 'page' : undefined}
                >
                  {t(link.label)}
                </a>
              </li>
            );
          })
        }
        <li class="hidden items-center gap-3 md:flex">
          <LanguageSelector idSuffix="desktop" classesSize={6} />
          <ThemeSelector idSuffix="desktop" classesSize={6} />
        </li>
      </ul>
    </div>
  </nav>
</header>
